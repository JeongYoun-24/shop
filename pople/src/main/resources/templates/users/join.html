<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/layout}">
	  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
	  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
	  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	  <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
	  <title>회원가입 페이지</title>

<!--container  border border-1-->
<main>
	<div layout:fragment="content" class="m-2 p-2 ">
		<!-- 해당 페이지 콘텐츠 영역 작성 -->
	<!--	<div>

			<form action="/users/join" method="post" th:object="${usersDTO}" >
				<div class="input-group mt-3  ">
					<label for="userid" class="input-group-text">아이디</label>
					<input type="text"  class="form-control" name="userid" id="userid" placeholder="아이디 입력해주세요"
						   th:field="*{userid}" >
				</div>
				<div th:if="${#fields.hasErrors('userid')}" th:errors="*{userid}" class="fieldError">Incorrect data</div>

				<div class="input-group mt-3">
					<label for="password" class="input-group-text">비밀번호</label>
					<input type="password" class="form-control" name="password" id="password" placeholder="비밀번호 입력"
						   th:field="*{password}">
				</div>
				<div th:if="${#fields.hasErrors('password')}" th:errors="*{password} " class="fieldError">Incorrect data</div>

				<div class="input-group mt-3">
					<label for="password2" class="input-group-text">비밀번호재확인</label>
					<input type="password" class="form-control" id="password2" placeholder="비밀번호 입력"
						   th:field="*{password}">
				</div>
				<div class="input-group mt-3">
					<label for="name" class="input-group-text">이름</label>
					<input type="text" class="form-control" name="name" id="name" placeholder="이름 입력"
						   th:field="*{name}">
				</div>
				<div th:if="${#fields.hasErrors('name')}" th:errors="*{name} " class="fieldError">Incorrect data</div>

				<div class="input-group mt-3">
					<label for="email" class="input-group-text">이메일</label>
					<input type="email" class="form-control" name="email" id="email" placeholder="이메일을 입력해주세요"
						   th:field="*{email}" >
				</div>
				<div th:if="${#fields.hasErrors('email')}" th:errors="*{email} " class="fieldError">Incorrect data</div>

				<div class="input-group mt-3">
					<label for="phone" class="input-group-text">전화번호</label>
					<input type="text" class="form-control" id="phone" placeholder="전화번호 입력"
						   th:field="*{phone}">
				</div>
				<div th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="fieldError">Incorrect data</div>

				<div class="input-group mt-3">
					<label for="birthDate" class="input-group-text">생년월일</label>
					<input type="text"  class="form-control" id="birthDate" placeholder="생년월일 입력"
						   th:field="*{birthDate}">
				</div>
				<div th:if="${#fields.hasErrors('birthDate')}" th:errors="*{birthDate}"class="fieldError">Incorrect data</div>
				&lt;!&ndash;스프링 시큐리티에서는 GET방식을 제외한 POST/PUT/DELETE요청에 CSRF요청&ndash;&gt;
				&lt;!&ndash;<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">&ndash;&gt;

				<div class="my-4">
					<div class="d-flex justify-content-end">
						<button type="submit" class="btn btn-primary">Submit</button>
						<button type="reset"  class="btn btn-secondary reset">Reset</button>
					</div>

				</div>
			</form>

		</div>-->
		<div class="mt-5">
			<div class="w-50 m-auto d-flex justify-content-center mt-5">

				<div id="H1" class="mt-5"> <!-- 회원 로그인 -->

					<div class="d-flex justify-content-center  border-bottom  border-black">
						<h3>회원 가입</h3>

					</div>
					<form action="/users/join" method="post" th:object="${usersDTO}" >
						<div class="row ">
							<div class="mt-3">
								<input type="text"  class="form-control" name="userid" id="userid" placeholder="아이디 입력해주세요"
									   th:field="*{userid}" >

								
							</div>
							<p id="idCheck"></p>
							<div th:if="${#fields.hasErrors('userid')}" th:errors="*{userid}" class="fieldError">Incorrect data</div>

							<div class="mt-2 d-flex">
								<input type="password" class="form-control" name="password" id="password" placeholder="비밀번호 입력"
									   th:field="*{password}">
									   <button id="pwdBtn1" class="btn border">확인</button>
							</div>
							<p id="pwCheck"></p>
							
							<div th:if="${#fields.hasErrors('password')}" th:errors="*{password} " class="fieldError">Incorrect data</div>

							<div class="mt-2 d-flex">
								<input type="password" class="form-control" name="password2" id="password2" placeholder="비밀번호 재입력"
									   th:field="*{password}">
								<button id="pwdBtn2" class="btn border"> 확인 </button>
							</div>
							<p id="pwCheck2"></p>
							<div th:if="${#fields.hasErrors('password')}" th:errors="*{password} " class="fieldError">Incorrect data</div>

							<div class="mt-2">
								<input type="text" class="form-control" name="name" id="name" placeholder="ex)한글 이름 입력"
									   th:field="*{name}">
							</div>
							<p id="NameCheck"></p>
							<div th:if="${#fields.hasErrors('name')}" th:errors="*{name} " class="fieldError">Incorrect data</div>

							<div class="mt-2">
								<input type="email" class="form-control" name="email" id="email" placeholder="ex)@ 포함 이메일을 입력해주세요"
									   th:field="*{email}" >
							</div>
							<p id="emCheck"></p>
							<div th:if="${#fields.hasErrors('email')}" th:errors="*{email} " class="fieldError">Incorrect data</div>

							<div class="mt-2">
								<input type="text" class="form-control" id="phone" placeholder="ex)-없이 010포함 전화번호 입력" maxlength="13"
									   th:field="*{phone}">
							</div>
							<p id="phCheck"></p>
							<div th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="fieldError">Incorrect data</div>

							<div class="mt-2">
								<input type="text"  class="form-control" id="birthDate" placeholder="ex)19990101 생년월일 입력  " maxlength="8"
									   th:field="*{birthDate}">
							</div>
							<p id="biCheck"></p>
							<div th:if="${#fields.hasErrors('birthDate')}" th:errors="*{birthDate}"class="fieldError">Incorrect data</div>

						</div>

						<div>
							<div class="row mt-2 p-3">
								<button type="submit" class="mt-3 btn btn-danger" id="btnLogin" style="height: 50px;">회원가입</button>
								<!--  <button id="fromBtn" class="mt-2 btn btn-outline-danger" style="height: 50px;">회원가입</button> -->
								<!--							 <input type="hidden" th:name="$_csrf.parameterName}" th:value="${_csrf.token}">&ndash;&gt;-->
							</div>
						</div>
					</form>


				</div><!-- 회원 로그인 -->





			</div>

		</div>




		<!--모댈창 -->
	</div>

</main>








<script  layout:fragment="script" th:inline="javascript">





$(function(){
	//각 입력값들의 유효성 검증을 위한 정규표현식을 변수로 선언.
	const getIdCheck = RegExp(/^[a-zA-Z0-9]{4,14}$/);
         const getPwCheck = RegExp(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/);
         const getNameCheck = RegExp(/^[가-힣]+$/);
		 const getEamilChek = RegExp(/^[a-zA-Z0-9+-\_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/)
		 const getphon = RegExp(/^\d{3}\d{3,4}\d{4}$/)

		// ID 입력값 검증 (공백확인 , 정규표현식 어긋나는지 확인)
		$('#userid').keyup(function() {
			if($(this).val() === ''){
				// $(this).css('background-color', 'pink');
			 	$('#idCheck').html('<b style="font-size: 14px; color: red">[아이디는 필수 값입니다.]</b>');
			 	chk1 = false;
			}else if(!getIdCheck.test($(this).val())){
				// $(this).css('background-color', 'pink');
			 	$('#idCheck').html('<b style="font-size: 14px; color: red">[아이디가 형식에 어긋납니다!]</b>');
			 	chk1 = false;
			}else{
				// $(this).css('background-color', 'aqua');
			 	$('#idCheck').html('<b style="font-size: 14px; color: dark">[아이디 입력 성공!]</b>');
			 	chk1 = true;
			}
		});
		// 비밀번호 입력값 검증 (공백확인 , 정규표현식 어긋나는지 확인)
		$('#pwdBtn1').click(function(e) {
			e.preventDefault();
			if($('#password').val() === ''){
				$('#pwCheck').show();
				// $(this).css('background-color', 'pink');
			 	$('#pwCheck').html('<b style="font-size: 14px; color: red">[비밀번호는 필수 값입니다.]</b>');
			 	chk2 = false;
			}else if(!getPwCheck.test($('#password').val())){
				$('#pwCheck').show();
				// $(this).css('background-color', 'pink');
			 	$('#pwCheck').html('<b style="font-size: 14px; color: red">[비밀번호가 형식에 어긋납니다.]</b>');
			 	chk2 = false;
			}else{
				$('#pwCheck').show();
				// $(this).css('background-color', 'aqua');
			 	$('#pwCheck').html('<b style="font-size: 14px; color: dark">[비밀번호 입력 성공!]</b>');
			 	chk2 = true;
			}
		}); // 비밀번호 검증 끝

		$('#pwdBtn2').click(function(e){
			e.preventDefault();
      		var pwd = $('#password').val()
      		var pwd2 = $('#password2').val()

			if(pwd === pwd2 ){
			// $(this).css('background-color', 'aqua');
			$('#pwCheck2').show();
			$('#pwCheck2').html('<b style="font-size: 14px; color: dark">[비밀번호 일치.]</b>')
			  console.log("일치");
			}else{
				$('#pwCheck2').show();
			    // $(this).css('background-color', 'pink');
				$('#pwCheck2').html('<b style="font-size: 14px; color: red">[비밀번호 불일치.]</b>')
			     console.log("불일치");
			}

		})

		$('#name').keyup(function() {
			if($(this).val() === ''){
				// $(this).css('background-color', 'pink');
				$('#NameCheck').show();
			 	$('#NameCheck').html('<b style="font-size: 14px; color: red">[이름은 필수 값입니다.]</b>');
			 	chk1 = false;
			}else if(!getNameCheck.test($(this).val())){
				// $(this).css('background-color', 'pink');
				$('#NameCheck').show();
			 	$('#NameCheck').html('<b style="font-size: 14px; color: red">[이름 형식에 어긋납니다!]</b>');
			 	chk1 = false;
			}else{
				// $(this).css('background-color', 'aqua');
				$('#NameCheck').show();
			 	$('#NameCheck').html('<b style="font-size: 14px; color: dark">[이름 입력 성공!]</b>');
			 	chk1 = true;
			}
		});
		$('#email').keyup(function() {
			if($(this).val() === ''){
				// $(this).css('background-color', 'pink');
				$('#emCheck').show();
			 	$('#emCheck').html('<b style="font-size: 14px; color: red">[이메일은 필수 값입니다.]</b>');
			 	chk1 = false;
			}else if(!getNameCheck.test($(this).val())){
				// $(this).css('background-color', 'pink');
				$('#emCheck').show();
			 	$('#emCheck').html('<b style="font-size: 14px; color: red">[이메일 형식에 어긋납니다!]</b>');
			 	chk1 = false;
			}else{
				// $(this).css('background-color', 'aqua');
				$('#emCheck').show();
			 	$('#emCheck').html('<b style="font-size: 14px; color: dark">[이메일 입력 성공!]</b>');
			 	chk1 = true;
			}
		});
		$('#phone').keyup(function() {
			if($(this).val() === ''){
				// $(this).css('background-color', 'pink');
				$('#phCheck').show();
			 	$('#phCheck').html('<b style="font-size: 14px; color: red">[전화번호는 필수 값입니다.]</b>');
			 	chk1 = false;
			}else if(!getphon.test($(this).val())){
				// $(this).css('background-color', 'pink');
				$('#phCheck').show();
			 	$('#phCheck').html('<b style="font-size: 14px; color: red">[전화번호 형식에 어긋납니다!]</b>');
			 	chk1 = false;
			}else{
				// $(this).css('background-color', 'aqua');
				$('#phCheck').show();
			 	$('#phCheck').html('<b style="font-size: 14px; color: dark">[전화번호 입력 성공!]</b>');
			 	chk1 = true;
			}
		});


$('#password').focus(function(){
	$('#pwCheck').hide();
        });
 $('#password2').focus(function(){
            $('#pwCheck2').hide();
        });
$('#name').focus(function(){
	$('#NameCheck').hide();
        });
 $('#email').focus(function(){
            $('#emCheck').hide();
        });
$('#phone').focus(function(){
	$('#phCheck').hide();
        });
 $('#birthDate').focus(function(){
            $('#biCheck').hide();
        });




	//    var errorMessage = [[${errorMessage}]];
    //     if(errorMessage != null){
    //         alert(errorMessage);
    //     }




	$('#joinBtn').click(function(e){
<!--	 e.preventDefault();-->
	console.log("클릭")

	})

})





</script>
 <style  layout:fragment="css" th:inline="css">
 .reset {
             margin-left: 0.2em;
         }
         .fieldError {
           color: #bd2130;
             font-size: 0.8em;
         }
 </style>
</html>